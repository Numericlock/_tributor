<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="utf-8">
	<title>ホーム/</title>
	<script src="public/js/jquery-2.1.3.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="icon" href="public/favicon.ico">
	<link rel="stylesheet" href="public/css/discord.css">
	<link rel="stylesheet" href="public/css/common.css">
	<link rel="stylesheet" href="public/css/home.css">
	<link rel="stylesheet" href="public/css/plus.css">
	<link rel="stylesheet" href="public/css/proedit.css">
	<link rel="stylesheet" href="public/css/checkbox.css">
	<script src="http://cdn.jsdelivr.net/mojs/latest/mo.min.js"></script>
	<script src="public/js/imgedit.js"></script>
</head>
<body>
	<div class="wrapper">
		<div class="nav">
			<a href="#">
				<svg class="nav-icon home-icon" version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
						 viewBox="0 0 512 512" xml:space="preserve">
					<g>
						<polygon class="st0" points="442.531,218 344.828,120.297 256,31.469 167.172,120.297 69.438,218.047 0,287.469 39.984,327.453 
							109.406,258.031 207.156,160.281 256,111.438 304.844,160.281 402.531,257.984 472.016,327.453 512,287.469 	"/>
						<polygon class="st0" points="85.719,330.375 85.719,480.531 274.75,480.531 274.75,361.547 343.578,361.547 343.578,480.531 
							426.281,480.531 426.281,330.328 256.016,160.063 	"/>
					</g>
				</svg>
			</a>
			<a href="notice.html">
				<svg class="nav-icon" version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
					 viewBox="0 0 512 512" xml:space="preserve">
					<g>
						<path class="st0" d="M127.75,398h256.5V282.125c0-70.813-57.422-128.25-128.25-128.25c-70.844,0-128.25,57.438-128.25,128.25V398z
							 M201.875,188.625c6.094-3.531,12.563-6.5,19.344-8.813c4.344-1.469,9.063,0.844,10.547,5.188s-0.844,9.063-5.203,10.547
							C220.859,197.5,215.391,200,210.234,203l0,0c-3.984,2.313-9.063,0.969-11.359-3.016C196.563,196,197.906,190.938,201.875,188.625z
							 M147.938,282.125c0-21.906,6.578-42.375,17.844-59.438c2.531-3.813,7.688-4.875,11.531-2.344
							c3.828,2.531,4.875,7.688,2.344,11.516c-9.547,14.453-15.094,31.703-15.094,50.266V369.5c0,4.594-3.719,8.313-8.313,8.313
							s-8.313-3.719-8.313-8.313V282.125z"/>
						<path class="st0" d="M404.844,424.656H107.156c-5.25,0-9.5,4.25-9.5,9.5v47.5h316.688v-47.5
							C414.344,428.906,410.094,424.656,404.844,424.656z"/>
						<polygon class="st0" points="264.422,87.891 267.656,30.344 244.359,30.344 247.594,87.891 	"/>
						<polygon class="st0" points="164.063,110.266 138.094,58.828 117.906,70.469 149.484,118.688 	"/>
						<polygon class="st0" points="28.469,168.438 79.922,194.406 88.344,179.844 40.125,148.281 	"/>
						<polygon class="st0" points="0,298 57.531,294.766 57.531,277.938 0,274.719 	"/>
						<polygon class="st0" points="454.469,277.938 454.453,294.766 512,298 512,274.719 	"/>
						<polygon class="st0" points="471.875,148.281 423.656,179.844 432.078,194.406 483.531,168.438 	"/>
						<polygon class="st0" points="394.078,70.469 373.922,58.828 347.938,110.281 362.516,118.688 	"/>
					</g>
				</svg>
			</a>
			<a href="#">
				<svg class="nav-icon" version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
					 viewBox="0 0 512 512" xml:space="preserve">
					<g>
						<path class="st0" d="M449.803,62.197C408.443,20.807,353.85-0.037,299.646-0.006C245.428-0.037,190.85,20.807,149.49,62.197
							C108.1,103.557,87.24,158.15,87.303,212.338c-0.047,37.859,10.359,75.766,30.547,109.359L15.021,424.525
							c-20.016,20.016-20.016,52.453,0,72.469c20,20.016,52.453,20.016,72.453,0L190.318,394.15
							c33.578,20.203,71.5,30.594,109.328,30.547c54.203,0.047,108.797-20.797,150.156-62.188
							c41.375-41.359,62.234-95.938,62.188-150.172C512.053,158.15,491.178,103.557,449.803,62.197z M391.818,304.541
							c-25.547,25.531-58.672,38.125-92.172,38.188c-33.5-0.063-66.609-12.656-92.188-38.188c-25.531-25.578-38.125-58.688-38.188-92.203
							c0.063-33.484,12.656-66.609,38.188-92.172c25.578-25.531,58.688-38.125,92.188-38.188c33.5,0.063,66.625,12.656,92.188,38.188
							c25.531,25.563,38.125,58.688,38.188,92.172C429.959,245.854,417.365,278.963,391.818,304.541z"/>
					</g>
				</svg>
			</a>
			<a href="#">
				<svg class="nav-icon" version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
					 viewBox="0 0 512 512" xml:space="preserve">
					<g>
						<path class="st0" d="M392.197,26.581h-4.77v-9.699c0-9.316-7.55-16.882-16.881-16.882c-9.332,0-16.898,7.566-16.898,16.882v9.699
							h-42.576v-9.699c0-9.316-7.558-16.882-16.89-16.882c-9.324,0-16.89,7.566-16.89,16.882v9.699h-42.576v-9.699
							c0-9.316-7.566-16.882-16.89-16.882c-9.332,0-16.89,7.566-16.89,16.882v9.699h-42.584v-9.699c0-9.316-7.566-16.882-16.89-16.882
							c-9.332,0-16.89,7.566-16.89,16.882v9.699h-4.77c-38.501,0.008-69.684,31.199-69.7,69.7v306.59
							c0.016,60.28,48.856,109.12,109.129,109.128h156.354l146.312-146.312V96.281C461.89,57.78,430.699,26.589,392.197,26.581z
							 M429.173,350.021h-31.679c-51.237,0-92.766,41.53-92.766,92.766v33.787l-2.692,2.692l-142.804,0.008
							c-21.149-0.008-40.148-8.525-54.026-22.378c-13.853-13.878-22.37-32.877-22.378-54.025V96.281
							c0.008-10.258,4.114-19.398,10.834-26.142c6.743-6.719,15.883-10.826,26.142-10.834h4.77v18.121c0,9.332,7.558,16.889,16.89,16.889
							c9.324,0,16.89-7.558,16.89-16.889V59.306h42.584v18.121c0,9.332,7.558,16.889,16.89,16.889c9.323,0,16.89-7.558,16.89-16.889
							V59.306h42.576v18.121c0,9.332,7.566,16.889,16.89,16.889c9.332,0,16.89-7.558,16.89-16.889V59.306h42.576v18.121
							c0,9.332,7.566,16.889,16.898,16.889c9.332,0,16.881-7.558,16.881-16.889V59.306h4.77c10.259,0.008,19.398,4.114,26.142,10.834
							c6.718,6.744,10.825,15.883,10.834,26.142V350.021z"/>
						<rect x="146.919" y="170.033" class="st0" width="218.17" height="32.725"/>
						<rect x="146.919" y="257.294" class="st0" width="218.17" height="32.725"/>
						<rect x="146.919" y="344.556" class="st0" width="130.9" height="32.725"/>
					</g>
				</svg>
			</a>
			<a href="#">
				<svg class="nav-icon" version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
					 viewBox="0 0 512 512" xml:space="preserve">
					<g>
						<path class="st0" d="M490.237,90.753c-13.382-13.412-32.076-21.764-52.532-21.756H74.295C33.258,69.012,0.015,102.247,0,143.284
							v225.432c0.015,41.036,33.258,74.272,74.295,74.286h363.41c20.456,0.008,39.15-8.344,52.532-21.755
							C503.648,407.866,512,389.171,512,368.716V143.284C512,122.829,503.648,104.135,490.237,90.753z M74.295,107.04h363.41
							c8.701,0.008,16.466,3.136,22.714,8.21L256,269.478L51.58,115.25C57.829,110.175,65.594,107.047,74.295,107.04z M38.042,368.716
							V143.284c0.016-5.826,1.486-11.205,3.894-16.05l141.813,129.998L41.55,384.044C39.365,379.393,38.058,374.252,38.042,368.716z
							 M437.705,404.96H74.295c-8.204-0.007-15.581-2.771-21.637-7.319l150.618-121.825l22.818,21.711
							c16.911,15.529,42.902,15.529,59.813,0l22.818-21.711l150.61,121.825C453.279,402.189,445.901,404.953,437.705,404.96z
							 M473.958,368.716c-0.016,5.535-1.322,10.677-3.508,15.328L328.251,257.233l141.805-129.998c2.415,4.844,3.886,10.217,3.901,16.05
							V368.716z"/>
					</g>
				</svg>
			</a>
			<div>
				<button type="button" id="dotRadius" data-toggle="modal" data-target="#ModalAddCalendar"><span id="plus"></span></button>
			</div>
			
		</div>
		
		<div id="timeLine">
		<label>
			<input type="file" id="dotRadius2" accept="image/*" style="display:none;">
				<div class="c-icon">
						<img src="public/img/2.jpg">			        			
				</div>	
		</label>
		</div>
		<div class="list">
			<a href="#"><img class="list-icon" src="public/img/2.jpg"></a>
			<a href="#"><img class="list-icon" src="public/img/2.jpg"></a>
			<a href="#"><img class="list-icon" src="public/img/2.jpg"></a>
			<a href="#"><img class="list-icon" src="public/img/2.jpg"></a>
			<a href="#"><img class="list-icon" src="public/img/2.jpg"></a>
			<a href="#">
				<svg class="edit-list-icon" version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
					 viewBox="0 0 512 512" xml:space="preserve">
					<g>
						<path class="st0" d="M504.16,183.326l-17.24-17.233c-10.453-10.461-27.415-10.452-37.868,0l-16.127,16.136l55.1,55.099
							l16.135-16.126C514.613,210.741,514.613,193.787,504.16,183.326z"/>
						<path class="st0" d="M18.474,178.378H64.86c10.199,0,18.474-8.274,18.474-18.49c0-10.208-8.275-18.482-18.474-18.482H18.474
							C8.274,141.406,0,149.68,0,159.888C0,170.104,8.274,178.378,18.474,178.378z"/>
						<rect x="22.83" y="197.722" class="st0" width="34.583" height="116.557"/>
						<path class="st0" d="M83.334,352.113c0-10.208-8.275-18.491-18.474-18.491H18.474C8.274,333.622,0,341.905,0,352.113
							c0,10.207,8.274,18.482,18.474,18.482H64.86C75.059,370.595,83.334,362.32,83.334,352.113z"/>
						<rect x="139.594" y="150.44" class="st0" width="155.624" height="25.937"/>
						<rect x="139.594" y="245.543" class="st0" width="155.624" height="25.938"/>
						<rect x="139.594" y="340.647" class="st0" width="95.104" height="25.937"/>
						<path class="st0" d="M57.413,71.556c0.008-3.977,3.242-7.211,7.215-7.219h263.645c8.82,0.008,16.638,3.52,22.434,9.287
							c5.767,5.8,9.283,13.619,9.292,22.434v132.194l34.583-34.583V96.058c-0.013-36.627-29.682-66.296-66.309-66.304H64.628
							c-23.096,0.017-41.785,18.71-41.798,41.802v50.507h34.583V71.556z"/>
						<path class="st0" d="M359.998,415.943c-0.009,8.814-3.525,16.633-9.292,22.424c-5.796,5.775-13.614,9.288-22.434,9.296H64.628
							c-3.973-0.008-7.206-3.242-7.215-7.218v-50.507H22.83v50.507c0.013,23.092,18.702,41.785,41.798,41.801h263.645
							c36.627-0.008,66.296-29.677,66.309-66.303v-58.274l-34.583,34.583V415.943z"/>
						<polygon class="st0" points="281.81,333.344 281.81,388.443 336.911,388.443 472.997,252.357 417.897,197.257 	"/>
					</g>
				</svg>
			</a>
		</div>
	</div>
	<div class="modal">
	</div>
	<div class="modal-content">
		<form class="modal-form" method="POST">
			<div class="modal-title">
				<h1>投稿</h1>
			</div>
			<div class="modal-control">
				<button class="modal-negative-button" id="modal_cancel" type='button'>キャンセル</button>
				<button class="modal-positive-button" id="modal_next" type='button'>次へ</button>
			</div>
			<div class="modal-text-area">
				<textarea class="message-area" id="textarea" name="post_message" title="今何してる？"　aria-label="今何してる？"　placeholder="今何してる？"></textarea>
			</div>
			<div class="modal-icon-area">
				<button type='button'><img class="control-icon" src="public/img/comment.svg"></button>
				<button type='button'><img class="control-icon" src="public/img/爆発.svg"></button>
				<button type='button'>
					<svg class="control-icon" version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512"  style="enable-background:new 0 0 512 512;" xml:space="preserve">
						<g>
							<path class="st0" d="M494.951,81.411c-8.782-19.97-22.202-37.857-40.19-52.147l-7.81,9.818l7.806-9.818
								C429.524,9.162,400.535-0.027,372.48,0c-29.128,0.008-57.267,9.731-80.169,26.77c-14.65,10.904-27.137,24.888-36.317,41.262
								c-9.18-16.374-21.668-30.358-36.318-41.262C196.779,9.731,168.64,0.008,139.517,0c-28.06-0.027-57.044,9.162-82.277,29.264
								c-17.992,14.29-31.408,32.178-40.194,52.147c-8.794,19.979-13.004,41.996-13,64.82c0.04,49.014,19.226,101.802,55.124,148.402
								c31.464,40.788,71.147,80.169,105.976,115.916c17.41,17.861,33.6,34.794,46.853,50.336c13.262,15.515,23.544,29.728,29.185,41.41
								l-0.017-0.035c1.987,4.113,5.12,6.484,7.43,7.718c1.19,0.639,2.24,1.041,3.181,1.339l1.409,0.367l0.853,0.158
								c0.407,0.053,0.669,0.132,1.956,0.158c1.238-0.018,1.518-0.105,1.925-0.149c1.204-0.193,1.847-0.385,2.822-0.709
								c1.375-0.481,3.032-1.208,4.87-2.573c1.816-1.339,3.833-3.422,5.211-6.274c5.64-11.683,15.918-25.903,29.176-41.41
								c19.883-23.321,46.351-49.732,73.676-77.789c27.334-28.09,55.547-57.862,79.153-88.464c35.897-46.6,55.088-99.378,55.127-148.393
								C507.955,123.416,503.746,101.39,494.951,81.411z M432.954,279.317c-29.998,38.924-69.059,77.806-104.076,113.72
								c-17.516,17.975-34.024,35.214-47.97,51.561c-9.757,11.464-18.171,22.421-24.91,33.105c-6.738-10.684-15.152-21.641-24.909-33.105
								c-20.92-24.503-47.624-51.089-74.791-79.005c-27.16-27.898-54.765-57.092-77.255-86.277
								c-32.979-42.732-49.948-90.696-49.908-133.087c0-19.751,3.636-38.268,10.878-54.712c7.25-16.442,18.062-30.847,32.842-42.617
								c20.885-16.574,43.988-23.776,66.662-23.803c23.497-0.008,46.525,7.903,65.178,21.8c18.658,13.905,32.869,33.63,39.174,57.328
								c1.462,5.496,6.441,9.328,12.125,9.328c5.683,0,10.663-3.833,12.124-9.328c6.305-23.698,20.516-43.423,39.179-57.328
								C325.95,33,348.979,25.09,372.48,25.098c22.674,0.027,45.777,7.229,66.661,23.803l0,0c14.782,11.77,25.593,26.175,32.848,42.626
								c7.237,16.435,10.877,34.952,10.877,54.712C482.905,188.621,465.937,236.585,432.954,279.317z"/>
						</g>
					</svg>
				</button>
			</div>
		</form>
	</div>
	<div class="modal-content2">
		<form class="modal-form" method="POST">
			<div class="modal-title">
				<h1>共有</h1>
			</div>
			<div class="modal-control">
				<button class="modal-negative-button" id="modal_back" type='button'>戻る</button>
				<button class="modal-positive-button" id="modal_post" type='button'>投稿</button>
			</div>
			<div class="modal-list-area">
				<div class="modal-list">
					<a href="#"><img class="modal-list-icon" src="public/img/2.jpg"></a>
					<span>にゅーめりっくろっく</span>
					<div class="checkbox">
							<div>
								<input type="checkbox" id="check" name="check" value="" />
								<label class="checkbox-label" for="check">
									<span class="checkbox-span"><!-- This span is needed to create the "checkbox" element --></span>
								</label>
							</div>
					</div>
				</div>
								<div class="modal-list">
					<a href="#"><img class="modal-list-icon" src="public/img/2.jpg"></a>
					<span>にゅーめりっくろっく</span>
					<div class="checkbox">
							<div>
								<input type="checkbox" id="check" name="check" value="" />
								<label class="checkbox-label" for="check">
									<span class="checkbox-span"><!-- This span is needed to create the "checkbox" element --></span>
								</label>
							</div>
					</div>
				</div>
								<div class="modal-list">
					<a href="#"><img class="modal-list-icon" src="public/img/2.jpg"></a>
					<span>にゅーめりっくろっく</span>
					<div class="checkbox">
							<div>
								<input type="checkbox" id="check" name="check" value="" />
								<label class="checkbox-label" for="check">
									<span class="checkbox-span"><!-- This span is needed to create the "checkbox" element --></span>
								</label>
							</div>
					</div>
				</div>
			</div>
			<div class="switch">
				<span id="disclose_status" class="sushiki">非公開</span>
				<input id="cmn-toggle-4" name="disclose" id="disclose" class="cmn-toggle cmn-toggle-round-flat" type="checkbox" checked>
				<label for="cmn-toggle-4"></label>
			</div>
		</form>
	</div>
	
	<div class="modal2">
	
	</div>
	<div class="modal-content3">
	<input id='scal' type='range' value='' min='10' max='400' oninput="scaling(value)" style='width: 300px;'><br>
<canvas id='cvs' width='300' height='400'></canvas><br>
<button onclick='crop_img()'>CROP</button><br>
<canvas id='out' width='200' height='200' style="display:none"></canvas>
	</div>
	<script>
		$('#dotRadius').on('click',function(){
			$('.modal').stop(true, true).fadeIn('500');
			$('.modal-content').show().stop(true, true).animate({
				top: "50%",
				display: "fixed",
				opacity: 1.0
			}, 500);
			$('.modal-content2').show().stop(true, true).animate({
				top:"50%",
				left: "120%",
				display: "fixed",
				opacity: 0
			}, 500);
		});	
		$('.modal').on('click',function(){
			$('.modal').stop(true, true).fadeOut('500');
			$('.modal-content').stop(true, true).animate({
				top: "-100px",
				left:"50%",
				opacity: 0
			}, 500, function(){
				$('.modal-content').hide();
			});
		});			
		$('.modal').on('click',function(){
			$('.modal').stop(true, true).fadeOut('500');
			$('.modal-content2').stop(true, true).animate({
				top: "-100px",
				opacity: 0
			}, 500, function(){
				$('.modal-content2').hide();
			});
		});	
		$('#modal_cancel').on('click',function(){
			$('.modal').stop(true, true).fadeOut('500');
			$('.modal-content').stop(true, true).animate({
				top: "-100px",
				opacity: 0
			}, 500, function(){
				$('.modal-content').hide();
			});
		});	
		$('#modal_next').on('click',function(){
			$('.modal-content2').show().stop(true, true).animate({
				left: "50%",
				display: "fixed",
				opacity: 1.0
			}, 500);
			$('.modal-content').stop(true, true).animate({
				left: "-100px",
				opacity: 0
			}, 500, function(){
				$('.modal-content').hide();
			});
		});	
		$('#modal_back').on('click',function(){
			$('.modal-content').show().stop(true, true).animate({
				left: "50%",
				display: "fixed",
				opacity: 1.0
			}, 500);
			$('.modal-content2').stop(true, true).animate({
				left: "120%",
				opacity: 0
			}, 500, function(){
				$('.modal-content2').hide();
			});
		});	
		
				$('#dotRadius2').on('change',function(){
			$('.modal2').stop(true, true).fadeIn('500');
			$('.modal-content3').show().stop(true, true).animate({
				top: "50%",
				display: "fixed",
				opacity: 1.0
			}, 500);

		});	
		$('.modal2').on('click',function(){
			$('.modal2').stop(true, true).fadeOut('500');
			$('.modal-content3').stop(true, true).animate({
				top: "-100px",
				left:"50%",
				opacity: 0
			}, 500, function(){
				$('.modal-content3').hide();
			});
		});			

		$('#modal_cancel').on('click',function(){
			$('.modal2').stop(true, true).fadeOut('500');
			$('.modal-content3').stop(true, true).animate({
				top: "-100px",
				opacity: 0
			}, 500, function(){
				$('.modal-content3').hide();
			});
		});	
		$('#modal_next').on('click',function(){
			$('.modal-content2').show().stop(true, true).animate({
				left: "50%",
				display: "fixed",
				opacity: 1.0
			}, 500);
			$('.modal-content').stop(true, true).animate({
				left: "-100px",
				opacity: 0
			}, 500, function(){
				$('.modal-content').hide();
			});
		});	
		$('#modal_back').on('click',function(){
			$('.modal-content').show().stop(true, true).animate({
				left: "50%",
				display: "fixed",
				opacity: 1.0
			}, 500);
			$('.modal-content2').stop(true, true).animate({
				left: "120%",
				opacity: 0
			}, 500, function(){
				$('.modal-content2').hide();
			});
		});	

		/*$(function() {
		  var $textarea = $('#textarea');
		  var lineHeight = parseInt($textarea.css('lineHeight'));
		  $textarea.on('input', function(e) {
			var lines = ($(this).val() + '\n').match(/\n/g).length;
			$(this).height(lineHeight * lines);
		  });
		});
		*/
		$(function(){
			var elements = document.getElementsByName('disclose') ;
			var radioval = $(this).val();
			var str = document.getElementById("introduction").innerHTML;
			var strReplace = str.replace(/\r?\n/g, "<br>");	
			console.log(strReplace);
			document.getElementById("introduction").innerHTML=strReplace;
			if(elements[0].checked == true){
				$('#discloseSettingArea').slideUp();
				$("#disclose").prop("checked", true);
				console.log(elements[0].checked);
				document.getElementById("disclose_status").innerHTML="非公開";
				
				$('#disclose_status').css('color','#a61a37');
			}else{
				$('#discloseSettingArea').slideDown();
				document.getElementById("disclose_status").innerHTML="公開";
				$('#disclose_status').css('color','#8ce196');
			}
		});
		$( 'input[name="disclose"]:checkbox' ).change( function() {
			var elements = document.getElementsByName('disclose') ;
			var radioval = $(this).val();
			if(elements[0].checked == false){
				$('#discloseSettingArea').slideDown();
				document.getElementById("disclose_status").innerHTML="公開";
				$('#disclose_status').css('color','#8ce196');
				$('#disclose_change').stop(true, true).fadeIn('500');
			}else{
				//$(".cmn-toggle-small").prop("checked", true);
				$('#discloseSettingArea').slideUp();
				document.getElementById("disclose_status").innerHTML="非公開";
				$('#disclose_status').css('color','#a61a37');
				$('#disclose_change').stop(true, true).fadeIn('500');
			}
		});
					var count = 0;
  var countup = function(){
    console.log(count++);
  } 
  			
			 $('#myImage').on('change', function (e) {
 	 				  var reader = new FileReader();
 	 				  
 	 				  
 	 				  console.log(reader);
 	 
 					  reader.onload = function (e) {
 					  	
   		     $("#preview").attr('src', e.target.result);
   			 }
 			   reader.readAsDataURL(e.target.files[0]);
 			   
			});
			$("#preview").click(function(){
   				console.log("aaaa");  				
			});
			 function cut(){
 				setTimeout(countup, 10000);
 				
 			}
 			

    const cvs = document.getElementById( 'cvs' )
    const cw = cvs.width
    const ch = cvs.height
    const out = document.getElementById( 'out' )
    const oh = out.height
    const ow = out.width
    

    let ix = 0    // 中心座標
    let iy = 0
    let v = 1.0   // 拡大縮小率
    const img  = new Image()
    img.onload = function( _ev ){   // 画像が読み込まれた
        ix = img.width  / 2
        iy = img.height / 2
        let scl = parseInt( cw / img.width * 100 )
        document.getElementById( 'scal' ).value = scl
        scaling( scl )
    }
    function load_img( _url ){  // 画像の読み込み
        img.src = ( _url ? _url : 'public/img/1.jpg' )
    }
    load_img()
    function scaling( _v ) {        // スライダーが変った
        v = parseInt( _v ) * 0.01
        draw_canvas( ix, iy )       // 画像更新
    }

    function draw_canvas( _x, _y ){     // 画像更新
    	console.log(_x);
    	console.log(_y);
        const ctx = cvs.getContext( '2d' )
        ctx.fillStyle = 'rgb(200, 200, 200)'
        ctx.fillRect( 0, 0, cw, ch )    // 背景を塗る
         if( _x <= 100*v ){
			_x=101*v;
        }
        if(_x >= img.width-100*v){
			_x = img.width-101*v;
        }
        if( _y <= 100*v ){
			_y=101*v;
        }
        if( _y >= img.height-101*v){
			_y=img.height-101*v;
        }
        ctx.drawImage( img,
      	      0, 0, img.width, img.height,
     	       (cw/2)-_x*v, (ch/2)-_y*v, img.width*v, img.height*v,
        )
        ctx.strokeStyle = 'rgba(200, 0, 0, 0.8)'
        ctx.beginPath();
        ctx.arc( 150,200,100, 0*Math.PI/180,360*Math.PI/180);
        ctx.stroke();
        ctx.closePath();
    }
    function crop_img(){                // 画像切り取り
        const ctx = out.getContext( '2d' )
        ctx.fillStyle = 'rgb(200, 200, 200)'
        ctx.fillRect( 0, 0, ow, oh )    // 背景を塗る
        ctx.drawImage( img, 0, 0, img.width, img.height,(ow/2)-ix*v, (oh/2)-iy*v, img.width*v, img.height*v,)
        
     var base64 = out.toDataURL("image/png").replace("image/png", "image/octet-stream");
      console.log(base64);
    }

    let mouse_down = false      // canvas ドラッグ中フラグ
    let sx = 0                  // canvas ドラッグ開始位置
    let sy = 0
    cvs.ontouchstart =
    cvs.onmousedown = function ( _ev ){     // canvas ドラッグ開始位置
        mouse_down = true
        sx = _ev.pageX
        sy = _ev.pageY
        return false // イベントを伝搬しない
    }
    cvs.ontouchend =
    cvs.onmouseout =
    cvs.onmouseup = function ( _ev ){       // canvas ドラッグ終了位置
        if ( mouse_down == false ) return
 		ix += (sx-_ev.pageX)/v;
 		iy += (sy-_ev.pageY)/v
         if( ix <= 100 ){
			ix=101;
        }
        if(ix >= img.width-100*v){
			ix = img.width-101*v;
        }
        if( iy <= 100*v ){
			iy=101*v;
        }
        if( iy >= img.height-101*v){
			iy=img.height-101*v;
        }
        mouse_down = false
        draw_canvas(ix ,iy )
        return false // イベントを伝搬しない
    }
    cvs.ontouchmove =
    cvs.onmousemove = function ( _ev ){     // canvas ドラッグ中
        if ( mouse_down == false ) return
        draw_canvas( ix + (sx-_ev.pageX)/v, iy + (sy-_ev.pageY)/v )
        return false // イベントを伝搬しない
    }
    cvs.onmousewheel = function ( _ev ){    // canvas ホイールで拡大縮小
        let scl = parseInt( parseInt( document.getElementById( 'scal' ).value ) + _ev.wheelDelta * 0.05 )
        if ( scl < 10  ) scl = 10
        if ( scl > 400 ) scl = 400
        document.getElementById( 'scal' ).value = scl
        scaling( scl )
        return false // イベントを伝搬しない
    }

	</script>
</body>
</html>
